import{c as ht,g as wt,r as g,f as w,w as M,a as V,J as R,K as z,h as U,T as Ft,L as yt,s as q,B as v,A as a,C as _,y as d,z as h,v as k,I as Tt,G as S,t as A,x as W,E as b,F as G,H as D}from"./index-BNUwYwPT.js";import{u as Ct,v as bt,a as J,b as N,c as kt,d as St,p as K,e as _t,f as Pt,g as Et,h as $t,i as Ot,j as At,k as Dt,r as X,s as Nt,l as Y,m as qt,T as Lt,n as Bt,Q as Ht,o as It}from"./QAvatar-Dwtjid20.js";import{s as xt,g as Qt,_ as L}from"./_plugin-vue_export-helper-CWtPBefb.js";import{a as jt}from"./dom-WLNO9E8f.js";import{Q as Z}from"./QSpinner-BCudlfsT.js";const tt=ht({name:"QTooltip",inheritAttrs:!1,props:{...St,...kt,...N,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...N.transitionShow,default:"jump-down"},transitionHide:{...N.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:J},self:{type:String,default:"top middle",validator:J},offset:{type:Array,default:()=>[14,14],validator:bt},scrollTarget:xt,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ct],setup(t,{slots:e,emit:u,attrs:f}){let c,i;const r=wt(),{proxy:{$q:o}}=r,s=g(null),n=g(!1),T=w(()=>K(t.anchor,o.lang.rtl)),P=w(()=>K(t.self,o.lang.rtl)),E=w(()=>t.persistent!==!0),{registerTick:et,removeTick:at}=_t(),{registerTimeout:C}=Pt(),{transitionProps:nt,transitionStyle:st}=Et(t),{localScrollTarget:B,changeScrollEvent:ot,unconfigureScrollTarget:rt}=$t(t,Q),{anchorEl:m,canShow:it,anchorEvents:F}=Ot({showing:n,configureAnchorEl:mt}),{show:lt,hide:$}=At({showing:n,canShow:it,handleShow:ct,handleHide:dt,hideOnRouteChange:E,processOnMount:!0});Object.assign(F,{delayShow:ft,delayHide:vt});const{showPortal:H,hidePortal:I,renderPortal:ut}=Dt(r,s,pt,"tooltip");if(o.platform.is.mobile===!0){const l={anchorEl:m,innerRef:s,onClickOutside(p){return $(p),p.target.classList.contains("q-dialog__backdrop")&&yt(p),!0}},O=w(()=>t.modelValue===null&&t.persistent!==!0&&n.value===!0);M(O,p=>{(p===!0?qt:X)(l)}),V(()=>{X(l)})}function ct(l){H(),et(()=>{i=new MutationObserver(()=>y()),i.observe(s.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),y(),Q()}),c===void 0&&(c=M(()=>o.screen.width+"|"+o.screen.height+"|"+t.self+"|"+t.anchor+"|"+o.lang.rtl,y)),C(()=>{H(!0),u("show",l)},t.transitionDuration)}function dt(l){at(),I(),x(),C(()=>{I(!0),u("hide",l)},t.transitionDuration)}function x(){i!==void 0&&(i.disconnect(),i=void 0),c!==void 0&&(c(),c=void 0),rt(),R(F,"tooltipTemp")}function y(){Nt({targetEl:s.value,offset:t.offset,anchorEl:m.value,anchorOrigin:T.value,selfOrigin:P.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function ft(l){if(o.platform.is.mobile===!0){Y(),document.body.classList.add("non-selectable");const O=m.value,p=["touchmove","touchcancel","touchend","click"].map(j=>[O,j,"delayHide","passiveCapture"]);z(F,"tooltipTemp",p)}C(()=>{lt(l)},t.delay)}function vt(l){o.platform.is.mobile===!0&&(R(F,"tooltipTemp"),Y(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),C(()=>{$(l)},t.hideDelay)}function mt(){if(t.noParentEvent===!0||m.value===null)return;const l=o.platform.is.mobile===!0?[[m.value,"touchstart","delayShow","passive"]]:[[m.value,"mouseenter","delayShow","passive"],[m.value,"mouseleave","delayHide","passive"]];z(F,"anchor",l)}function Q(){if(m.value!==null||t.scrollTarget!==void 0){B.value=Qt(m.value,t.scrollTarget);const l=t.noParentEvent===!0?y:$;ot(B.value,l)}}function gt(){return n.value===!0?U("div",{...f,ref:s,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",f.class],style:[f.style,st.value],role:"tooltip"},jt(e.default)):null}function pt(){return U(Ft,nt.value,gt)}return V(x),Object.assign(r.proxy,{updatePosition:y}),ut}}),Mt=function(){const t=Bt(),e=new Lt,u=g(!1),f=g(!1),c=g(1),i=g({totalCount:-1,records:[]}),r=g({totalCount:-1,records:[],users:[]}),o=async function(){u.value=!0,await e.newFanart().then(n=>{n&&(console.log("new fanart response",n),i.value.records.splice(0),c.value=1,i.value.records=n.records)}).catch(n=>{console.log("newFanart err",n),t.notify({color:"negative",message:"New!の取得でエラーになりました...",position:"top"})}),u.value=!1},s=async function(){f.value=!0,await e.hotFanart().then(n=>{n&&(console.log("top fanart response",n),r.value.records.splice(0),r.value.users.splice(0),r.value.records=n.records,n.records.forEach(T=>{const P=T.user;r.value.users.find(E=>E.userId==T.user.userId)==null&&r.value.users.push(P)}),console.log("top fanart result",r.value))}).catch(n=>{console.log("topFanart err",n),t.notify({color:"negative",message:"Hot!の取得でエラーになりました...",position:"top"})}),f.value=!1};return o(),s(),{newFanartLoading:u,topFanartLoading:f,newFanartPage:c,newFanartState:i,topFanartState:r,getNewFanart:o,getTopFanart:s}},Vt=q({name:"tweet-card",props:{state:{type:Object,required:!0}},setup(t){const e=w(()=>t.state),u=g(!1);return{st:e,dialogOpen:u}}}),Rt={class:"tw-card",style:{padding:"0"}},zt={key:0,class:"tw-card"},Ut={key:0,class:"tw-card"},Wt=["src"];function Gt(t,e,u,f,c,i){return d(),v("div",null,[a("div",Rt,[t.st.media[0]?(d(),v("div",zt,[t.st.media[0].mediaType=="image"?(d(),v("div",Ut,[a("img",{src:t.st.media[0].mediaUrl,class:"tw-img"},null,8,Wt)])):_("",!0)])):_("",!0)])])}const Jt=L(Vt,[["render",Gt]]),Kt=q({name:"user-icon",props:{state:{type:Object,required:!0}},setup(t){return{user:w(()=>t.state)}}}),Xt=["src"],Yt={class:"q-ml-sm"};function Zt(t,e,u,f,c,i){return d(),v(S,null,[h(Ht,{size:"lg"},{default:k(()=>[a("img",{src:t.user.userImage},null,8,Xt)]),_:1}),a("span",Yt,Tt(t.user.userName),1)],64)}const te=L(Kt,[["render",Zt]]),ee=q({name:"index-page",components:{TweetCard:Jt,UserIcon:te},setup(){const{newFanartLoading:t,topFanartLoading:e,newFanartPage:u,newFanartState:f,topFanartState:c,getNewFanart:i,getTopFanart:r}=Mt();return{newFanartLoading:t,topFanartLoading:e,newFanartPage:u,newFanartState:f,topFanartState:c,onClickNewFanart:function(){i()},onClickTopFanart:function(){r()}}}}),ae={class:"content-text"},ne={class:"q-mt-md",style:{"margin-bottom":"48px"}},se={class:"cursor-pointer"},oe={class:"fanart-base hot-fanart"},re={class:"row q-gutter-md wrap q-ml-md q-mb-md"},ie={class:"cursor-pointer"},le={class:"fanart-base new-fanart"};function ue(t,e,u,f,c,i){const r=W("user-icon"),o=W("tweet-card");return d(),A(It,{class:""},{default:k(()=>[a("div",ae,[e[6]||(e[6]=a("div",{class:"top-message-box"},[a("div",{class:"main-content"},[a("div",null,[a("hr"),a("div",null,"なんでもありのホロライブ非公式サイト！"),a("div",null,"いろんなコンテンツをまとめました"),a("div",{class:"text-right link"},"APIのドキュメントはこちら"),a("hr")]),a("div")])],-1)),a("div",ne,[a("div",{class:"hot-subtitle sub-title",onClick:e[0]||(e[0]=(...s)=>t.onClickTopFanart&&t.onClickTopFanart(...s))},[a("span",se,[e[3]||(e[3]=b("Hot!")),h(tt,null,{default:k(()=>e[2]||(e[2]=[b(" 再取得する ")])),_:1})]),t.topFanartLoading?(d(),A(Z,{key:0})):_("",!0)]),a("div",{class:G({fadeRight:!t.topFanartLoading})},[a("div",oe,[(d(!0),v(S,null,D(t.topFanartState.users,s=>(d(),v("div",{key:s.userId},[h(r,{state:s,class:"q-mb-xs"},null,8,["state"]),a("div",re,[(d(!0),v(S,null,D(t.topFanartState.records.filter(n=>n.user.userId==s.userId),n=>(d(),v("div",{key:n.tweet.id},[h(o,{state:n,class:"tweet-card"},null,8,["state"])]))),128))])]))),128))])],2)]),a("div",null,[a("div",{class:"new-subtitle sub-title",onClick:e[1]||(e[1]=(...s)=>t.onClickNewFanart&&t.onClickNewFanart(...s))},[a("span",ie,[e[5]||(e[5]=b("New!")),h(tt,null,{default:k(()=>e[4]||(e[4]=[b(" 再取得する ")])),_:1})]),t.newFanartLoading?(d(),A(Z,{key:0})):_("",!0)]),a("div",{class:G({fadeRight:!t.newFanartLoading})},[a("div",le,[(d(!0),v(S,null,D(t.newFanartState.records,s=>(d(),v("div",{key:s.tweet.id,style:{"margin-bottom":"32px","margin-right":"32px"}},[h(o,{state:s,class:"tweet-card"},null,8,["state"])]))),128))])],2)])])]),_:1})}const ge=L(ee,[["render",ue]]);export{ge as default};
